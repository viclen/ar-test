<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>GeoAR.js demo</title>

    <link rel="stylesheet" href="style/style.css">

    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>

    <script>
        function getLocation(cb = () => { }) {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(cb);
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }

        function showPosition(position) {
            const objects = document.getElementById("objects");

            objects.setAttribute("gps-entity-place", "latitude: " + position.coords.latitude + "; longitude: " + position.coords.longitude);
            objects.setAttribute("visible", "true");
        }

        AFRAME.registerComponent('ar-scene', {
            init: function () {
                const clickToStart = document.getElementById('clickToStart');

                clickToStart.addEventListener('click', () => {
                    const screen = document.getElementById('screen');

                    screen.setAttribute('position', '0.2 1.6 -2.7');
                    screen.setAttribute('visible', 'true');
                    screen.setAttribute('scale', '0.8 0.8 0.8');

                    getLocation(showPosition)

                    clickToStart.remove();
                });

                const image1 = document.querySelector('#index1');
                image1.addEventListener('click', function (e) {
                    window.open("https://www.sadia.com.br/quantomaisvocesabe/receitas/?ingredientes=lingui√ßas");
                })
                const image2 = document.querySelector('#index2');
                image2.addEventListener('click', function (e) {
                    window.open("https://www.sadia.com.br/quantomaisvocesabe/receitas/?ingredientes=peito%20de%20peru");
                })
                const image3 = document.querySelector('#index3');
                image3.addEventListener('click', function (e) {
                    window.open("https://www.sadia.com.br/bio/");
                })
                const image4 = document.querySelector('#index4');
                image4.addEventListener('click', function (e) {
                    window.open("https://www.sadia.com.br/quantomaisvocesabe/receitas/?ingredientes=frango");
                })
                const image5 = document.querySelector('#index5');
                image5.addEventListener('click', function (e) {
                    window.open("https://www.sadia.com.br/quantomaisvocesabe/menu-da-semana/semana-1/");
                })
                const image6 = document.querySelector('#index6');
                image6.addEventListener('click', function (e) {
                    window.open("https://www.sadia.com.br/");
                })
            }
        })
    </script>
</head>

<body style="margin: 0; overflow: hidden;">
    <div class="fixed-front" id="clickToStart">
        <div class="centered-text">Clique para iniciar</div>
    </div>

    <a-scene ar-scene vr-mode-ui="enabled: false" embedded
        arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;" renderer="antialias: true;">
        <a-assets>
            <img id="descubra-novos-preparos" src="./img/descubra-novos-preparos.png">
            <img id="aprenda-receitas-de-peru" src="./img/aprenda-receitas-de-peru.png">
            <img id="de-onde-vem" src="./img/de-onde-vem.png">
            <img id="prepare-receitas-sobrecoxa" src="./img/prepare-receitas-sobrecoxa.png">
            <img id="descubra-menu-para-semana" src="./img/descubra-menu-para-semana.png">
            <img id="logo-sadia" src="./img/logo-sadia.png">
            <img id="texto-quanto-mais" src="./img/texto-quanto-mais.png">
            <img id="myCustomImage" src="./img/preload.jpg">
        </a-assets>

        <a-entity visible="false" id="objects" look-at="[gps-camera]">
            <a-entity visible="false" id="screen" position="0.2 1.6 -5.7" scale="1 1 1">
                <a-image id="index1" class="cantap" position="0.5 2 -1" rotation="0 0 0" scale="1 1 1" width="0.9"
                    height="0.9" opacity="1" src="#descubra-novos-preparos" roughness="1" visible="true" material=""
                    geometry="">
                </a-image>

                <a-image id="index2" class="cantap" position="0.5 1 -1" rotation="0 0 0" scale="1 1 1" width="0.9"
                    height="0.9" opacity="1" src="#aprenda-receitas-de-peru" roughness="1" visible="true" material=""
                    geometry="">
                </a-image>

                <a-image id="index3" class="cantap" position="0.5 -0 -1" rotation="0 0 0" scale="1 1 1" width="0.9"
                    height="0.9" opacity="1" src="#de-onde-vem" roughness="1" visible="true" material="" geometry="">
                </a-image>

                <a-image id="index4" class="cantap" position="0.5 -1 -1" rotation="0 0 0" scale="1 1 1" width="0.9"
                    height="0.9" opacity="1" src="#prepare-receitas-sobrecoxa" roughness="1" visible="true" material=""
                    geometry="">
                </a-image>

                <a-image id="index5" class="cantap" position="0.5 -2 -1" rotation="0 0 0" scale="1 1 1" width="0.9"
                    height="0.9" opacity="1" src="#descubra-menu-para-semana" roughness="1" visible="true" material=""
                    geometry="">
                </a-image>

                <a-image id="logo-sadia-index" class="cantap" position="-1.1 -0.8 -1.3" rotation="0 0 0" scale="1 1 1"
                    width="2.5" height="3.8" opacity="1" src="#logo-sadia" roughness="1" visible="true" material=""
                    geometry="">
                </a-image>

                <a-image id="index6" class="cantap" position="-1 1.9 -1" rotation="0 0 0" scale="1 1 1" width="1.5"
                    height="1.5" opacity="1" src="#texto-quanto-mais" roughness="1" visible="true" material=""
                    geometry="">
                </a-image>
            </a-entity>
        </a-entity>

        <a-entity camera gps-camera rotation-reader raycaster="objects: .cantap" cursor="fuse: false; rayOrigin: mouse;"
            wasd-controls-enabled="false" position="" rotation="" look-controls="" look-controls-enabled="false"
            wasd-controls="">
        </a-entity>

        <canvas class="a-canvas a-grab-cursor a-mouse-cursor-hover" data-aframe-canvas="true" width="1204"
            height="980"></canvas>

        <a-light type="ambient" intensity="1" light=""></a-light>
    </a-scene>
</body>

</html>